/* css/style.css */
/* ========= Root & Base ========= */
:root{
  --bg1:#fff7de;
  --bg2:#aee6ff;
  --gold:#ffd24d;
  --orange:#ff9f3b;
  --blue:#3a95ff;
  --green:#2dd36f;
  --red:#ff5d5d;
  --card:#ffffffdd;
  --text:#24303f;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font-family:system-ui,Arial,sans-serif;color:var(--text);background:radial-gradient(circle at 50% -20%, var(--bg1), var(--bg2));}

/* ========= Epic Background ========= */
.sky{min-height:100vh;position:relative;overflow-x:hidden;}
.aura{position:fixed;inset:-25vmax;pointer-events:none;
  background:radial-gradient(circle at 50% 50%, rgba(255,210,77,.28), transparent 45%);}
.rays{position:fixed;inset:0;pointer-events:none;mix-blend-mode:screen;
  background:conic-gradient(from 0deg, rgba(255,210,77,.15), transparent 40%, rgba(255,210,77,.15));
  animation:spin 22s linear infinite;}
.rays-slow{animation-duration:40s}
.clouds:before,.clouds:after{content:"";position:fixed;left:-20vw;right:-20vw;height:24vh;top:10vh;
  background:
   radial-gradient(circle at 20% 50%, #fff, #fff0 35%),
   radial-gradient(circle at 60% 40%, #fff, #fff0 35%),
   radial-gradient(circle at 80% 55%, #fff, #fff0 35%);
  opacity:.35;filter:blur(10px);animation:clouds 60s linear infinite;}
.clouds:after{top:28vh;opacity:.25;animation-duration:90s}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes clouds{to{transform:translateX(20vw)}}

/* ========= Arena Themes ========= */
.arena{min-height:100vh;position:relative;overflow-x:hidden;background:radial-gradient(circle at 50% -20%, #fff7de, #aee6ff);}
.arena-1 .aura{background:radial-gradient(circle, rgba(255,210,77,.32), transparent 46%);}
.arena-2 .aura{background:radial-gradient(circle, rgba(58,149,255,.26), transparent 46%);}
.arena-3 .aura{background:radial-gradient(circle, rgba(255,120,77,.26), transparent 46%);}

/* ========= Layout ========= */
.wrap{max-width:1000px;margin:0 auto;padding:24px;}
.fade-in{animation:fade .6s ease both}
@keyframes fade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:none}}
.title{font-size:2.4rem;margin:8px 0 6px}
.subtitle{opacity:.85;margin:0 0 14px}
.glow-strong{text-shadow:0 0 12px var(--gold),0 0 28px rgba(255,210,77,.6)}
.card{
  background:var(--card);backdrop-filter:blur(6px);
  border:1px solid rgba(0,0,0,.06); border-radius:16px; padding:16px; margin:16px 0;
  box-shadow:0 8px 30px rgba(0,0,0,.08);
}

/* ========= Buttons ========= */
.btn{
  border:none;border-radius:12px;padding:12px 18px;
  background:linear-gradient(45deg,var(--gold), var(--orange));
  color:#3a2b00;font-weight:700;cursor:pointer;
  box-shadow:0 6px 18px rgba(255,159,59,.35);
  transition:transform .12s, box-shadow .2s, filter .2s, opacity .2s;
}
.btn:hover{transform:translateY(-1px);box-shadow:0 10px 24px rgba(255,159,59,.45);filter:saturate(1.06)}
.btn:active{transform:translateY(0)}
.btn.ghost{background:transparent;border:2px solid var(--gold);color:#775400}
.btn[disabled]{opacity:.6;cursor:not-allowed;filter:grayscale(.3);box-shadow:none}

/* Small util */
.center{text-align:center}
.mt{margin-top:12px}
.tiny{font-size:.9rem;opacity:.7}

/* ========= Level Cards ========= */
.levels{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
.level .level-header{display:flex;align-items:center;gap:10px}
.level .level-icon{font-size:1.6rem}
.level.locked{filter:grayscale(.55) contrast(.95);opacity:.9}
.level.locked .btn{background:#ddd;color:#666;box-shadow:none;cursor:pointer}
.level.locked .btn:hover{transform:none}

/* ========= Upload ========= */
.upload-card #preview{display:block;max-width:320px;margin-top:10px;border-radius:12px;border:3px solid var(--gold)}
.upload-row{display:flex;gap:16px;align-items:center;justify-content:center;flex-wrap:wrap}

/* ========= Stage / Battle ========= */
.stage .battle{position:relative;overflow:hidden}
.hp-row{display:flex;gap:16px;justify-content:space-between;flex-wrap:wrap}
.hp{flex:1;min-width:240px}
.hp label{display:block;margin-bottom:6px;font-weight:700}
.bar{width:100%;height:18px;background:#eaeaea;border-radius:10px;overflow:hidden;box-shadow:inset 0 0 6px rgba(0,0,0,.1)}
.bar-inner{height:100%;width:100%;transition:width .25s ease}
.green{background:linear-gradient(90deg,#6de382,#2dd36f)}
.red{background:linear-gradient(90deg,#ff8a8a,#ff5d5d)}

.fighters{display:flex;justify-content:space-between;align-items:flex-end;gap:10px;margin-top:10px;min-height:170px}
.hero,.boss{width:170px;height:170px;position:relative}
#arenaFX{position:absolute;inset:0;pointer-events:none}

/* Avatare */
.hero svg,.boss svg{width:100%;height:100%;filter:drop-shadow(0 6px 12px rgba(0,0,0,.25))}
.hero svg .glow,.boss svg .glow{filter:blur(1px)}

/* ========= Projectiles & FX ========= */
.spear{
  position:absolute;width:120px;height:6px;border-radius:3px;
  background:linear-gradient(90deg,#cfd3d8,#f2f6ff);transform-origin:left center;
  box-shadow:0 0 8px rgba(255,255,255,.55)}
.spear:after{content:"";position:absolute;right:-10px;top:-4px;border-left:12px solid #f0f3fa;border-top:4px solid transparent;border-bottom:4px solid transparent}
.lightning{position:absolute;width:4px;background:linear-gradient(#fff,#ffd24d,#ff9f3b);box-shadow:0 0 12px #fff}
.burst{position:absolute;width:8px;height:8px;border-radius:50%;background:#fff;box-shadow:0 0 14px 6px #fff;animation:burst .4s ease-out forwards}
@keyframes burst{to{transform:scale(3);opacity:0}}

/* ========= Loot & Confetti ========= */
.chest{width:160px;height:110px;margin:14px auto;background:#a66b2e;border-radius:12px;position:relative;
  box-shadow:inset 0 -10px 0 #8b541f,0 6px 18px rgba(0,0,0,.2)}
.chest:before{content:"";position:absolute;left:0;right:0;height:36px;top:0;background:#c8843d;border-radius:12px 12px 0 0;transform-origin:top;animation:open 1.1s ease forwards .25s}
@keyframes open{to{transform:rotateX(120deg)}}

.confetti{position:fixed;width:10px;height:10px;animation:fall 3s linear forwards}
@keyframes fall{from{transform:translateY(-20px) rotate(0);opacity:1}to{transform:translateY(85vh) rotate(720deg);opacity:0}}

/* ========= Quiz Widgets ========= */
#quizArea h2{margin:0 0 6px}
.q-block{display:grid;gap:10px}
.q-row{display:flex;gap:10px;flex-wrap:wrap}
.option{padding:10px 12px;border-radius:10px;border:2px solid #e3e8ef;background:#fff;cursor:pointer}
.option.active{border-color:var(--blue);box-shadow:0 0 0 3px rgba(58,149,255,.15)}
.option.correct{background:#eaffef;border-color:#72e39b}
.option.wrong{background:#ffe9e9;border-color:#ff9d9d}

.badge{display:inline-flex;align-items:center;gap:6px;background:#f3f6fb;border:1px solid #e3e8ef;padding:6px 10px;border-radius:999px;font-size:.9rem}
.q-actions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}
.input{padding:10px;border:2px solid #e3e8ef;border-radius:10px;width:100%}

.drag-col{flex:1;min-width:240px;background:#f9fbff;border:2px dashed #d6deea;border-radius:12px;padding:10px}
.draggable{user-select:none;cursor:grab}
.draggable:active{cursor:grabbing}
.pair{display:flex;align-items:center;justify-content:space-between;padding:8px 10px;background:#fff;border:2px solid #e3e8ef;border-radius:10px;margin:6px 0}
.drop{min-height:44px;border:2px dashed #cfd8e3;border-radius:10px;padding:6px;background:#fff}
.pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;background:#fff;border-radius:999px;border:2px solid #e3e8ef}

.timer{height:8px;background:linear-gradient(90deg,#6de382,#2dd36f);border-radius:8px;transition:width .1s}
.result{margin-top:12px;text-align:center;font-weight:700}
.success{color:#1a8a3a}
.failure{color:#bb1d1d}

/* ========= Topics List ========= */
.topics{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:8px;margin:8px 0 0;padding-left:18px}
.topics li{margin:0 0 4px}

/* ========= Micro-Feedback ========= */
.hint{font-size:.95rem;opacity:.85;margin-top:6px}
.shake{animation:shake .2s linear 0s 2}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-4px)}
  50%{transform:translateX(4px)}
  75%{transform:translateX(-3px)}
  100%{transform:translateX(0)}
}

/* ========= Responsive ========= */
@media (max-width:600px){
  .hero,.boss{width:145px;height:145px}
  .level .level-header h3{font-size:1.05rem}
  .wrap{padding:18px}
}
